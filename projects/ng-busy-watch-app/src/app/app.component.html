<a href="https://github.com/yiqu/ng-busy-watch" class="float-right">
  <img loading="lazy" width="149" height="149"
  src="https://github.blog/wp-content/uploads/2008/12/forkme_right_green_007200.png?resize=149%2C149"
  class="attachment-full size-full " alt="Fork me on GitHub" data-recalc-dims="1">
</a>
<div class="container pb-5">
  <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="3rem">
    <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="1rem" class="sticky-top">
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="1rem" class="w-100">
        <div>
          <button mat-stroked-button color="primary" (click)="actionClick(true)">Start busy (emit true)</button>
        </div>
        <div>
          <button mat-stroked-button color="warn" (click)="actionClick(false)">Stop busy (emit false)</button>
        </div>
        <div>
          <button mat-stroked-button color="accent" (click)="completeAll()">Complete all Observables and recreate</button>
        </div>
      </div>
    </div>

    <section>
      <div class="title">
        Default
      </div>
      <div>
        <div *ngBusyWatch="busy$" class="example0">
          {{ testText }}
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        Customized text, with extra CSS class
      </div>
      <div>
        <div *ngBusyWatch="{busy: busy$, message: 'Be patient...', extraCssClass: 'diff-color'}" class="example1" >
          Added a css class selector
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        Boolean value instead of an Observable, and customized message
      </div>
      <div>
        <div *ngBusyWatch="{busy: hardcodedValue, message: 'Just a second...'}">
          <div class="example1" >
            {{ testText }}
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        Boolean value instead of an Observable
      </div>
      <div>
        <div *ngBusyWatch="hardcodedValue">
          <div class="example1" >
            {{ testText }}
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        No spinner animation
      </div>
      <div>
        <div *ngBusyWatch="{busy: busy$, showSpinner: false}">
          <div class="example1" >
            Cool content...
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        HTML Table
      </div>
      <div>
        <div *ngBusyWatch="{busy: busy$, message: 'Table loading...'}">
          <table class="plain">
            <tr>
              <th>Company</th>
              <th>Contact</th>
              <th>Country</th>
            </tr>
            <tr>
              <td>Alfreds Futterkiste</td>
              <td>Maria Anders</td>
              <td>Germany</td>
            </tr>
            <tr>
              <td>Centro comercial Moctezuma</td>
              <td>Francisco Chang</td>
              <td>Mexico</td>
            </tr>
            <tr>
              <td>Ernst Handel</td>
              <td>Roland Mendel</td>
              <td>Austria</td>
            </tr>
            <tr>
              <td>Island Trading</td>
              <td>Helen Bennett</td>
              <td>UK</td>
            </tr>
            <tr>
              <td>Laughing Bacchus Winecellars</td>
              <td>Yoshi Tannamuri</td>
              <td>Canada</td>
            </tr>
            <tr>
              <td>Magazzini Alimentari Riuniti</td>
              <td>Giovanni Rovelli</td>
              <td>Italy</td>
            </tr>
          </table>
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        Material table
      </div>
      <div>
        <div *ngBusyWatch="busy$" class="example3">
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 w-100">
            <!-- Position Column -->
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef> No. </th>
              <td mat-cell *matCellDef="let element"> {{element.position}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Name </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="weight">
              <th mat-header-cell *matHeaderCellDef> Weight </th>
              <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="symbol">
              <th mat-header-cell *matHeaderCellDef> Symbol </th>
              <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </div>
    </section>


    <section>
      <div class="title">
        Material tabs
      </div>
      <div>
        <div>
          <mat-tab-group>
            <mat-tab label="Tab 1">
              <div class="example-small-box mat-elevation-z4">
                <div *ngBusyWatch="{busy: busy$, message: 'Loading Tab 1'}">
                  Tab 1
                </div>
              </div>
            </mat-tab>
            <mat-tab label="Tab 2">
              <div class="example-large-box mat-elevation-z4">
                <div *ngBusyWatch="{busy: busy$, message: 'Loading Tab 2'}">
                 Tab 2
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
    </section>

    <section>
      <div class="title">
        Material expansion panel
      </div>
      <div>
        <div>
          <mat-accordion>
            <mat-expansion-panel hideToggle>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Click to open panel
                </mat-panel-title>
                <mat-panel-description>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <div>
                <div *ngBusyWatch="busy$">
                  {{ testText }}
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>
    </section>

    <section fxLayout="column" fxLayoutAlign="center center">
      <div class="title">
        Http request
      </div>
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="1rem" class="w-100 mb-3">
        <div>
          <button mat-stroked-button color="primary" (click)="onHttpReuqest()">Send HTTP request</button>
        </div>
      </div>
      <div>
        <div *ngBusyWatch="httpLoading">
          <ng-container *ngIf="httpData; else noData">
            <div>
              {{httpData | json}}
            </div>
          </ng-container>
          <ng-template #noData>
            No data, send a request :)
          </ng-template>
        </div>
      </div>
    </section>

    <section fxLayout="column" fxLayoutAlign="center center">
      <div class="title">
        NgRx Selectors
      </div>
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="1rem" class="w-100 mb-3">
        <div>
          <button mat-stroked-button color="primary" (click)="dispatchCall()">Dispatch fetch action</button>
        </div>
      </div>
      <div>
        <div *ngBusyWatch="this.as.dataLoading$">
          <ng-container *ngIf="(this.as.data$ | async) as data; else noData">
            <div>
              {{data | json}}
            </div>
          </ng-container>
          <ng-template #noData>
            No data.
          </ng-template>
        </div>
      </div>
    </section>
  </div>
</div>
